# Pirates’s API ажиллуулах заавар

Тухайн repository нь Pirates’s API-тай холбоотой баримт бичгийг хадгалж байгаа болно.

### Агуулга

- [Ерөнхий](#1-ерөнхий)
- [Ашиглах заавар](#2-ашиглах-заавар)
  - [Амжилттай хүсэлт](#21-амжилттай-хүсэлт)
  - [Амжилтгүй хүсэлтийн төрлүүд](#22-амжилтгүй-хүсэлтийн-төрлүүд)
- [Ажиллах зарчим](#3-ажиллах-зарчим)
  - [Оролтыг гаралт болгон өөрчлөх дүрэм](#31-оролтыг-гаралт-болгон-өөрчлөх-дүрэм)

## 1. Ерөнхий

<br>

Pirate's API нь “sentence”, “magic_number” гэсэн 2 параметрүүдтэй JSON-ийг оролт хэлбэрээр авж гаралтад “english_sentence”, “mongolian_sentence”, “japanese_sentence” гэсэн параметрүүдтэй JSON хариулт өгнө.

Pirate's API хэрхэн ажилладагтай танилцахыг хүсвэл [Ажиллах зарчим](#3-ажиллах-зарчим) хэсэгтэй танилцана уу.

## 2. Ашиглах заавар

<br>

Тухайн API-ийг ажиллуулахын тулд Pirates-API.py файлийг өөрийн local машин дээр татан авч ажиллуулах шаардлагатай. Ажиллуулсан тохиолдолд дараах http://127.0.0.1:5000 endpoint - оор эхэлсэн API үүснэ.

API-д хандахдаа Postman эсвэл үүнтэй энэ зэрэгцэхүйц software программ хангамж ашиглахыг зөвлөж байна. Postman татах линк: https://www.postman.com/downloads/

Postman ашиглан api хүсэлт явуулахдаа дараах нөхцөлүүдийг ашиглана.

```
Сервис төрөл: Post
Сервис хандах хаяг: http://127.0.0.1:5000
Authorization: Шаардлагагүй

Жишээ json input request:
{
"sentence": "People are funny",
"magic_number": 24,
}
```

Postman-ы body raw хэсэгт дээр жишээн дээрхтэй адилаар json бичиж өгөх бөгөөд доорх шаардлагын дагуу бичих шаардлагатай.

<br>
Шаардлага:

| Key            | Value  | Шаардлагатай эсэх | Тайлбар                                                                          |
| -------------- | ------ | ----------------- | -------------------------------------------------------------------------------- |
| `sentence`     | string | required          | Англи хэл дээрх өгүүлбэр байх шаардлагатай /Тухайн өгүүлбэрийг англи хэл дээр бичигдсэн эсэхийг шалгаж байгаа учир өгүүлбэр нь дүрмийн хувьд зөв байх шаардлагатай./ |
| `magic_number` | int    | required          | Хэдэн ч оронтой тоо байж болно.                                                  |

<br>

### 2.1. Амжилттай хүсэлт:

<br>

Хэрвээ хүсэлт амжилттай бичигдсэн тохиолдолд доорхтой адилаар responce /Жишээ/ ирнэ.

Responce:

```
{
"english_sentence": "8 Pirates are funny",
"mongolian_sentence": "8 Далайн дээрэмчид хөгжилтэй",
"japanese_sentence": "8 海賊は面白い"
}
```

### 2.2. Амжилтгүй хүсэлтийн төрлүүд:

<br>

1. Sentence өгүүлэгдэхүүнгүй бичигдсэн тохиолдолд:

Responce:

```
{
"error": "Where am I?"
}
```

2. Magic_number тоо биш эсвэл хоосон байгаа тохиолдолд:

Responce:

```
{
"error": "Where is magic?"
}
```

3. Sentence нь англи хэлээс өөр хэлээр эсвэл ойлгомжгүй бичигдсэн тохиолдолд:

Responce:

```
{
"error": "Please use proper english sentence."
}

```
4. Sentence нь str type биш 

```
{
"error": "Sentence has to be str type or can not be null."
}

```

## 3. Ажиллах зарчим

<br>

Pirates's API нь доорх хүснэгтэн дэх Key-үүдийг агуулсан Json хүсэлт авах бөгөөд 2.1-т заасан дүрмийн дагуу оролтыг өөрчлөн "english_sentence", "mongolian_sentence", "japanese_sentence" гэсэн key-тэй json хариултыг буцаана.

### 3.1. Оролтыг гаралт болгон өөрчлөх дүрэм

<br>

1.  Оролтын өгүүлбэрийн өгүүлэгдэхүүнийг (noun subject) олоод

        a. хэрэв “I” байвал “Pirate King” болгон өөрчилнө (Ж нь: I am => Pirate King is)

        b. бусад тохиолдолд “Pirates” болгон өөрчилнө

        c. Хэрэв өгүүлбэр өгүүлэгдэхүүнгүй бол цааш үйлдэл хийхгүйгээр “error” гэсэн

    параметртэй “Where am I?” гэсэн хариулт буцаана.

2.  magic_number-ийн ялгаатай хуваагчдын тоог олох ба тэр нь “pirates_count” буюу
    далайн дээрэмчний тоо болно.

        a. Хэрэв оролтын хүсэлтэд энэ параметр хоосон, эсвэл тоо биш байвал цааш

    үйлдэл хийхгүйгээр “error” гэсэн параметртэй “Where is magic?” гэсэн
    хариулт буцаана.

3.  Хэрэв 1-р хувиргалтаас гарсан өгүүлбэрийн өгүүлэгдэхүүн “Pirate King” биш байвал
    өгүүлэгдэхүүн нь өмнөө “pirates_count” утгыг авна.

4.  Үр дүнд гарсан өгүүлбэрийг Монгол болон Япон 2 хэл рүү хөрвүүлээд Англи
    хэлнийхтэй нь нийлүүлээд 3 өгүүлбэр буцаана.

5.  Хүсэлтээс хамаарсан өөр ямар нэгэн алдаа гарсан үед “error” гэсэн параметртэй
    алдааны мессежийг буцаана.
